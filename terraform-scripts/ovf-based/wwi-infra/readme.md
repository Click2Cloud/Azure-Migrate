**Steps to perform**
1. Download the OVF templates from [here](https://click2cloud.sharepoint.com/:f:/s/Migration-Studio/EkeClFdp5ypDr3DImTxKJvEBuOWdlRHbns_aGnBeJAHA1A?e=EkaMWa)

2. Download the files (main.tf, variables.tf and var.tfvars) to the server where terraform is installed.

3. Update var.tfvars file with required parameters for script to run.

    **vsphere_server** - This is the vCenter server IP.  
    **vsphere_user** - This is the username for vCenter.  
    **vsphere_password** - This is the password for vCenter.  
    **vsphere_datacenter** - Name of the ESXi server.  
    **vsphere_datastore** - Name of storage/container of the vCenter.  
    **vsphere_network** - The name of the network on vCenter.  
    **esxi_server_ip** - IP of the ESXi server.  
    **ovf_path_for_app** - Path of downloaded App OVF template file.  
    **ovf_path_for_db** - Path of the downloaded Database OVF template file.  
    **ovf_path_for_legacy_db** - Path of the downloaded Legacy Database OVF template file.  

4. Go to the path where main.tf file is present using following command.
> cd <path-to-main.tf>.

5. Execute following terraform commands step by step
    * **terraform init -var-file="var.tfvars"** - This command performs several different initialization steps in order to prepare a working directory for use.
    * **terraform plan -var-file="var.tfvars"** - This command is used to create an execution plan. 
    * **terraform apply -var-file="var.tfvars"** - This command is used to apply the changes required to reach the desired state of the configuration, or the pre-determined set of actions generated by a terraform plan execution plan.

6. 3 VMs will be created
    1. WideWorldImportersApp (Windows Server 2016) - Hosting Wide World Importers e-Commerce application on IIS
    2. WideWorldImportersDatabase (Windows Server 2016) - Hosting SQL 2017 with WWI database containing Sales data
    3. WideWorldImportersLegacyDatabase (Windows Server 2008 R2) - Hosting SQL 2008 R2 with WWICampaign database containing Campaign data
    
> You can login to your VMs using IP, with username **Administrator** and password **CLICK2CLOUD#54321**.
> Default password for user **sa** is set to **MSAzure#123** for WideWorldImportersDatabase and WideWorldImportersLegacyDatabase.
    
7. Log in to WideWorldImportersApp Virtual Machine, open File Explorer and go to **C:/inetpub/wwroot** open **config.json** file
Replace Data source IP with the IP of WWIDatabase Virtual Machine and restart the IIS service.

Source infrastructure is ready to use!
